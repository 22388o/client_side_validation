{-
  Id: urn:ubideco:stl:7EpM1uymEteG4g4xmF5ntKYX1wXXpbQj5iLiDreH4jWa#protein-donald-cool
  Name: CommitVerify
  Version: 0.1.0
  Description: Client-side-validation deterministic commitments
  Author: Dr Maxim Orlovsky <orlovsky@lnp-bp.org>
  Copyright (C) 2023-2024 LNP/BP Standards Association. All rights reserved.
  License: Apache-2.0
-}

@context
typelib CommitVerify

import Std#DzTvt9gGhPUKD8Dkkjk9PDBhkJ4gtWxXWQjxnmUYLNrs#voyage-kimono-disco
  use U5#nitro-george-nebula


@mnemonic(ventura-equal-think)
data Commitment        : [Byte ^ 32]

@mnemonic(pony-audio-mozart)
data Leaf              : inhabited#16 (protocol ProtocolId, message Message)
                       | entropy (entropy U64, pos U32)

@mnemonic(owner-albert-lexicon)
data MerkleBlock       : depth Std.U5#nitro-george-nebula
                       , cofactor U16
                       , crossSection [TreeNode ^ 1..0xffffffff]
                       , entropy U64?

@mnemonic(culture-metro-modular)
data MerkleHash        : [Byte ^ 32]

@mnemonic(input-mouse-amber)
data MerkleNode        : branching NodeBranching
                       , depth U8
                       , width U256
                       , node1 MerkleHash
                       , node2 MerkleHash

@mnemonic(father-adios-common)
data MerkleProof       : pos U32
                       , cofactor U16
                       , path [MerkleHash ^ ..0x20]

@mnemonic(civil-left-nova)
data MerkleTree        : depth Std.U5#nitro-george-nebula
                       , entropy U64
                       , cofactor U16
                       , messages {ProtocolId -> ^ ..0xffffff Message}
                       , map {U32 -> ^ ..0xffffff ProtocolId, Message}

@mnemonic(shampoo-bishop-morgan)
data Message           : [Byte ^ 32]

@mnemonic(food-amanda-burger)
data NodeBranching     : void | single | branch


@mnemonic(gamma-banjo-corona)
data ProtocolId        : [Byte ^ 32]

@mnemonic(joker-lemon-mental)
data ReservedBytes1    : [Byte ^ 1]

@mnemonic(pocket-habitat-soviet)
data ReservedBytes2    : [Byte ^ 2]

@mnemonic(claudia-drink-digital)
data ReservedBytes4    : [Byte ^ 4]

@mnemonic(cheese-final-locate)
data StrictHash        : [Byte ^ 32]

@mnemonic(empty-active-truck)
data TreeNode          : concealedNode (depth Std.U5#nitro-george-nebula, hash MerkleHash)
                       | commitmentLeaf (protocolId ProtocolId, message Message)


